# Design patterns

ООП программы состоят из **объектов**. Объект сочетает данные и процедуры для их обработки. Процедуры обычно называются **методами**. Объект выполняет действие, когда получает запрос(сообщение) от **клиента**. Посылка запроса - это **единственный** способ заставить объект выполнить операцию. А выполнение операции - это **единственный** способ изменить внутреннее состояние объекта. Эти ограничения гарантируют **инкапсуляцию**. Представление объекта **закрыто** от внешней программы.

Самая трудная задача в ОО проектировании - разложить систему на объекты:

* Можно сформулировать задачу письменно, выделить из текста существительные(классы) и глаголы(методы).
* Сосредоточиться на отношениях и разделения обязанностей через построение модели реального мира. (У некоторых классов может не быть прототипов в реальном мире)

Если придерживаться строгого моделирования и ориентироваться на реальный мир, то можно получить систему отражающую сегодняшние потребности, но, возможно, не учитывающие будущие изменения. **Абстракция** - ключ к гибкому дизайну.

**Сигнатура метода** - это название метода, перечень параметров на входе в метод и перечень возвращаемых значений на выходе из метода. Все множество сигнатур методов называют интерфейсом объекта. 

**Тип** - это именованный набор сигнатур методов. У одного объекта может быть много типов. Типы могут наследоваться и иметь родительские типы.

Когда объекту посылается запрос, то операция, которую он будет выполнять, зависит как от запроса, так и от объекта-адресата. Разные объекты, поддерживающие одинаковые интерфейсы, на один и те же запросы могут выполнять разные операции. Ассоциация запроса с объектом и одной из его операций во время выполнения называется **динамическим связыванием**. Это позволяет во время выполнения программы подставить вместо одного объекта другое, при условии наличия одного и того же интерфейса. Такая связь называется **полиморфизмом**. Что в свою очередь позволяет объектам изменять взаимоотношения во время выполнения.

**Класс** объекта определяет, как объект реализован, то есть внутреннее состояние и реализацию операций объекта. **Тип** относится только к интерфейсу объекта - множеству запросов, на которые объект способен отвечает. У объекта может быть много типов, и объекты разные классов могут иметь один и тот же тип.

Наследования **класса** используется для реализации одного объекта в терминах другого объекта. Наследование **интерфейса** (порождение типов) используется, когда объект можно использовать вместо другого объекта т.к. они обладают один и тем же типом.

**Наследование класса** - это определение реализации одного класса в терминах другого. Повторное использование за счет порождения подкласса называется **белым ящиком** (white-box reuse). Внутреннее устройство родительских классов видимо подклассам. 

(+) Наследование класса определяется статически на этапе компиляции и полностью поддерживается на уровне языка программирования.

(-) Нельзя изменить унаследованную от родителя реализацию во время выполнения программы т.к. родительский класс и потомок связаны на этапе компиляции

(-) Поскольку подклассу доступны детали реализации родительского класса, то это нарушает инкапсуляцию родителя. Реализации настолько тесно связаны, что любые изменения реализации родителя неизбежно скажутся на потомке. (С проблемой можно справиться, если наследовать только от абстрактного класса)

**Композиция объектов** - это получение новой или более сложной функциональности за счет объединения или композиции объектов. Для композиции требуется, чтобы объединяемые объекты имели четко определенные интерфейсы. Такой способ повторного использования кода называется **черным ящиком** (black-box reuse). Внутреннее устройство объектов остается скрытым.

(+) Можно применять во время выполнения программы за счет получения объектами ссылки друг на друга

(+) Доступ к объектам осуществляется только через их интерфейсы - не нарушая инкапсуляцию 

(-) Более сложное проектирование интерфейса т.к. один объект придется использовать со спектром других объектов.

**Предпочитайте композицию наследованию классов**